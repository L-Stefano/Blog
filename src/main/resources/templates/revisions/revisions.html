<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<!DOCTYPE html>
<html>
<head>
    <title th:text="${configurations.get('websiteName')}+' | '+${pageName}">更新历史</title>
    <meta name="description" th:content="${configurations.get('websiteDescription')}">
    <meta name="viewport" content="width=device-width">
    <link rel="shortcut icon" th:href="@{${configurations.get('websiteIcon')}}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/X-admin/lib/layui/css/layui.css}">
    <link rel="stylesheet" th:href="@{/blog/amaze/css/base.css}">

</head>

<body>
<div th:replace="blog/amaze/header::nav-fragment"></div>
<div th:replace="blog/amaze/header::header-fragment"></div>

<h1 class="subheading" style="margin-left: 32px;margin-bottom: 16px">更新历史记录</h1>

<!--流加载数据库记录-->
<div id="revision-flow" class="layui-panel" style="margin-left: 64px;margin-right: 200px">

</div>


<footer th:replace="blog/amaze/footer::footer-fragment"></footer>
<script th:src="@{/blog/plugins/jquery/jquery.min.js}"></script>
<script src="/X-admin/editormd/lib/marked.min.js"></script>
<script src="/X-admin/editormd/lib/prettify.min.js"></script>
<script src="/X-admin/editormd/lib/raphael.min.js"></script>
<script src="/X-admin/editormd/lib/underscore.min.js"></script>
<script src="/X-admin/editormd/lib/sequence-diagram.min.js"></script>
<script src="/X-admin/editormd/lib/flowchart.min.js"></script>
<script src="/X-admin/editormd/lib/jquery.flowchart.min.js"></script>
<script src="/X-admin/editormd/src/editormd.js"></script>
<script th:src="@{/blog/plugins/comment/valid.js}"></script>
<script th:src="@{/X-admin/lib/layui/layui.all.js}"></script>
<script th:src="@{/X-admin/lib/layui/js/layui.js}"></script>
<script th:inline="javascript">
    layui.use(function () {
        var flow = layui.flow;
        var revisionInfoList= [[${revisionInfoList}]];
        var pageSingleSize = [[${pageSingleSize}]];
        var pageTotalSize = [[${pageTotalSize}]];

        // 流加载实例
        flow.load({
            elem: '#revision-flow', // 流加载容器
            isAuto: false,

            done: function (page, next) { // 执行下一页的回调
                // 模拟数据插入
                setTimeout(function () {
                    var lis = [];
                    for (var i = 0; i < pageSingleSize; i++) {
                        var datetime=revisionInfoList[i].revisionDatetime;
                        var content=revisionInfoList[i].revisionContent;
                        lis.push("content");

                    }

                    // 执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
                    // pages 为 Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多
                    next(lis.join(''), page < 10); // 此处假设总页数为 10
                }, 520);
            }
        });

    });
</script>
<script th:inline="javascript">
    testEditormdView = editormd.markdownToHTML("test-markdown-view"+(i+1), {
        htmlDecode: "style,script,iframe",
        emoji: true,
        taskList: true,
        tex: true,
        flowChart: true,
        sequenceDiagram: true,
        markdown: content
    });

</script>
</body>
</html>
